<!DOCTYPE html> 
<!--
  Copyright 2011 Google Inc.
 
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
     http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 
  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Chrome DevRel Team (chrome-devrel@googlegroups.com)
                 Alex Russell (slightlyoff@chromium.org)
                 Brad Neuberg
--> 
<html> 
<head> 
    <meta charset='utf-8'> 
    <meta http-equiv="X-UA-Compatible" content="chrome=1"> 
    <title>HTML5演示模板</title> 
	<link href="main.css" class="theme" rel="stylesheet" /> 

  </head>
  <body class="three-d">
    <div class="presentation">
	  <!--slides start -->
      <div class="slides"> 
        <div class="slide" id="landing-slide">
			<section class="middle">
				<p style='font-size:42px;margin-bottom:0;'>3D的基本原理与如何制作Web 3D应用</p>
				<p style='font-size:24px;padding-left:480px;margin-top:0;''>——3D引擎Three.js</p>
				<p style='font-size:20px;padding-left:460px;'>口碑网F2E 正邪 - 2011.06.16</p>
			</section>
		</div>
		<div class="slide">
          <header><h1 style="color:#a11111;font-weight:bold;">3D<span style='color:#0033ff;font-weight:normal;'>imension</span></h1></header>
          <section>
          </section>
		 <span class="counter">1</span>
	   </div>
	   <div class="slide">
          <header><h1>人眼的感知</h1></header>
          <section>
          </section>
		  <span class="counter">2</span>
	   </div>
	   <div class="slide">
          <header><h1>3D到2D的转换</h1></header>
          <section class="middle">
			<img src="3d-2d.png" width="600" height="400"/>
          </section>
		  <span class="counter">3</span>
	   </div>
	   <div class="slide">
          <header><h1>点、线、面</h1></header>
          <section>
          </section>
		  <span class="counter">4</span>
	   </div>
	   <div class="slide">
          <header><h1>3D几何体</h1></header>
          <section>
          </section>
		  <span class="counter">4</span>
	   </div>
	   <div class="slide">
          <header><h1>材质</h1></header>
          <section>
          </section>
		  <span class="counter">5</span>
	   </div>
	   <div class="slide">
          <header><h1>3D场景</h1></header>
          <section>
          </section>
		  <span class="counter">6</span>
	   </div>
	    <div class="slide">
          <header><h1>3D摄像机</h1></header>
          <section>
          </section>
		  <span class="counter">7</span>
	   </div>
	   <div class="slide">
          <header><h1>渲染</h1></header>
          <section>
          </section>
		  <span class="counter">8</span>
	   </div>
	   <div class="slide">
          <header><h1>灯光</h1></header>
          <section>
          </section>
		  <span class="counter">9</span>
	   </div>
	   <div class="slide">
          <header><h1>旋转立方体</h1></header>
          <section>
			<div id="slide_10_container"></div>
			<div style="position:relative;left:600px;top:-200px;">
				<input style="width:200px" type="range" id="slide_10_slider" value="300" min="100" max="600">
				<p>透视因子：<span id="slide_10_slider_span">300</span></p>
			</div>
          </section>
		  <span class="counter">10</span>
	   </div>
	   <div class="slide">
          <header><h1>旋转立方体</h1></header>
          <section>
			<div id="slide_11_container"></div>
          </section>
		  <span class="counter">11</span>
	   </div>
	   <div class="slide">
          <header><h1>Q&A</h1></header>
          <section class="middle">
			<p style='font-size:60px;'>Thank You!</p>
          </section>
		  <span class="counter">12</span>
	   </div>
	 </div>
	 <!--slides end -->
	 <script src="slider.js"></script>
	<script src="Three.js"></script> 
	<script src="Cube.js"></script> 
	<script src="RequestAnimationFrame.js"></script>
	<script src='raphael-min.js'></script>
	<script src='vector3d.js'></script>


<script id="slide_10_code">
(function(){
	var canvas = new Raphael('slide_10_container', 800, 600);
	var cubicR = 80;
	var set = [new Vector3d(-cubicR, -cubicR, -cubicR),
				  new Vector3d(cubicR, -cubicR, -cubicR),
				  new Vector3d(cubicR, -cubicR, cubicR),
				  new Vector3d(-cubicR, -cubicR, cubicR),
				  new Vector3d(-cubicR, cubicR, -cubicR),
				  new Vector3d(cubicR, cubicR, -cubicR),
				new Vector3d(cubicR, cubicR, cubicR),
				new Vector3d(-cubicR, cubicR, cubicR)];

	var perFactor;
	var slider = document.getElementById("slide_10_slider");
	var onSliderChanged =function(){
		perFactor = parseFloat(slider.value);
		document.getElementById("slide_10_slider_span").innerHTML = perFactor;
	}
	onSliderChanged();
	slider.onchange = onSliderChanged;
	

	var map2D =function(p){
		var pers = p.getPerspective(perFactor);
		var r=p.persProjectNew (pers);
		r.x+=300;
		r.y+=220;
		return r;
	}
	var drawLine = function(p1, p2){
		canvas.path("M"+p1.x +" "+p1.y+"L"+p2.x+" "+p2.y)
	}

	var animate = function () {
		requestAnimationFrame( animate );
		render();
	}
	var render = function () {
		var i = set.length;
		while (i--) {
			set[i].rotateXY (1, 2);
		}
		var p0 = map2D(set[0]),
		     p1 = map2D(set[1]),
			 p2 = map2D(set[2]),
			 p3 = map2D(set[3]),
			 p4 = map2D(set[4]),
			 p5 = map2D(set[5]),
			 p6 = map2D(set[6]),
			 p7 = map2D(set[7]);
		
		canvas.clear();

		drawLine(p0, p1);
		drawLine(p1, p2);
		drawLine(p2, p3);
		drawLine(p3, p0);
		
		drawLine(p4, p5);
		drawLine(p5, p6);
		drawLine(p6, p7);
		drawLine(p7, p4);
		
		drawLine(p0, p4);
		drawLine(p1, p5);
		drawLine(p2, p6);
		drawLine(p3, p7);
	}
	animate();
})();
</script>
<script id="slide_11_code">
(function(){
	var camera, scene, renderer, object;
	var w  = 800, h = 520;
	//初始化3D场景
	function init() {
		var container = document.getElementById( 'slide_11_container' );
		camera = new THREE.Camera( 50, w/h, 1, 1000 );
		camera.position.z = 800;
		scene = new THREE.Scene();
		var materials = [];
		for ( var i = 0; i < 6; i ++ ) {
			materials.push( [ new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } ) ] );
		}
		object = new THREE.Mesh( new THREE.Cube(200, 200, 200,  1, 1, 1, materials),  new THREE.MeshFaceMaterial());
		scene.addObject( object );

		var pointLight = new THREE.PointLight( 0xffffff, 1 );
		pointLight.position.x = 300;
		pointLight.position.y = 200;
		scene.addLight( pointLight );

		renderer = new THREE.CanvasRenderer();
		renderer.setSize(w, h );
		container.appendChild( renderer.domElement );
	}
	function animate() {
		requestAnimationFrame( animate );
		render();
	}
	function render() {
		object.rotation.y += 0.01;
		object.rotation.x += 0.02;
		renderer.render(scene, camera );
	}
	init();
	animate();
})();
</script>
	</body>
</html>